<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Calendly Simple FunnelDoctor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #3498db;
            text-align: center;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 5px;
        }
        .test-section h2 {
            margin-top: 0;
            color: #2c3e50;
        }
        a.calendly-link {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin: 10px 0;
        }
        button.calendly-button {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
        }
        .debug-info {
            background-color: #f9f9f9;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Test Calendly Simple FunnelDoctor</h1>
    
    <div class="debug-info">
        <p><strong>Informations de débogage:</strong></p>
        <ul>
            <li>Cette page est conçue pour tester l'intégration entre FunnelDoctor et Calendly</li>
            <li>Les scripts <code>funnel-doctor.js</code> et <code>bridging.js</code> sont chargés avec le mode debug activé</li>
            <li>Consultez la console du navigateur pour voir les logs <code>FD-DEBUG:</code></li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Test avec Widget Calendly Embed</h2>
        <p>Utilisez le widget intégré ci-dessous pour prendre un rendez-vous :</p>
        <div class="calendly-inline-widget" data-url="https://calendly.com/mehdi-zen/test-funnel-doctor" style="min-width:320px;height:700px;"></div>
        <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    </div>

    <div class="debug-info">
        <p><strong>Vérification des événements:</strong></p>
        <p>Une fois le rendez-vous pris, vérifiez dans les logs backend si l'appel à <code>/api/bridge/associate</code> a été correctement reçu.</p>
    </div>

    <!-- FunnelDoctor Tracking Snippet (v2 - Chargement en 2 temps) - COMPLET -->
    <script>
      (function(w,d,s){
        var fdLoader=d.createElement(s);
        fdLoader.async=true;
        // Charge depuis la racine car servi par le même serveur que la page HTML
        fdLoader.src="/funnel-doctor.js"; 
        fdLoader.setAttribute("data-fd-site", "32644625-aec4-4b0b-bb6f-d87dde266c35"); 
        
        fdLoader.onload = function() {
          var fdBridging = d.createElement(s);
          fdBridging.async = true;
          // Charge depuis la racine
          fdBridging.src = "/bridging.js"; 
          // Active les logs FD-DEBUG pour ce test
          fdBridging.setAttribute("data-debug", "true"); 
          d.head.appendChild(fdBridging);
        };
        fdLoader.onerror = function() {
          console.error("Erreur critique: Impossible de charger funnel-doctor.js depuis /funnel-doctor.js");
        };
    
        d.head.appendChild(fdLoader); 
    
      })(window,document,"script");
    </script>
    <!-- FunnelDoctor Tracking Snippet - Fin -->
</body>
</html>
